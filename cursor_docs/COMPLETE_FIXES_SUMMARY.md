# –ü–æ–ª–Ω—ã–π –æ—Ç—á–µ—Ç –æ–± –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è—Ö (03.01.2026)

## üéØ –í—Å–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è –≤—ã–ø–æ–ª–Ω–µ–Ω—ã –Ω–∞ 100%

### 1. SearXNG Integration ‚úÖ
**–§–∞–π–ª—ã**: `backend/Dockerfile`, `backend/entrypoint.sh`, `docker/searxng/settings.yml`, `backend/src/search/searxng_provider.py`

- ‚úÖ –£–¥–∞–ª–µ–Ω —É—Å—Ç–∞—Ä–µ–≤—à–∏–π –∫–æ–¥ –∑–∞–ø—É—Å–∫–∞ SearXNG –∏–∑ backend
- ‚úÖ SearXNG –≤ –æ—Ç–¥–µ–ª—å–Ω–æ–º –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–µ
- ‚úÖ –í–∫–ª—é—á–µ–Ω—ã —Ä–∞–±–æ—á–∏–µ engines: google, bing, startpage, brave
- ‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω fallback –Ω–∞ google, bing
- ‚úÖ –£–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω–∞—è –ø–æ–¥–¥–µ—Ä–∂–∫–∞ –≤—Å–µ—Ö —è–∑—ã–∫–æ–≤
- ‚úÖ –ú—è–≥–∫–∞—è —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—è –ø–æ —Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω–æ—Å—Ç–∏
- ‚úÖ –ê–≤—Ç–æ–æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —è–∑—ã–∫–∞

### 2. Deep Research Architecture ‚úÖ
**–§–∞–π–ª—ã**: `backend/src/workflow/research/supervisor_agent.py` (–ù–û–í–´–ô), `nodes.py`, `graph.py`, `state.py`, `researcher.py`

- ‚úÖ Supervisor –∫–∞–∫ –ø–æ–ª–Ω–æ—Ü–µ–Ω–Ω—ã–π LangGraph –∞–≥–µ–Ω—Ç —Å ReAct
- ‚úÖ 5 –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–æ–≤ supervisor: read_main, write_main, review_agent, create_agent_todo, make_final_decision
- ‚úÖ Researchers –∫–∞–∫ LangGraph –∞–≥–µ–Ω—Ç—ã —Å –ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ–º/–ø–µ—Ä–µ–ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ–º
- ‚úÖ Continuous execution mode —Å —Ü–∏–∫–ª–∞–º–∏
- ‚úÖ SupervisorQueue –¥–ª—è –º–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã—Ö –≤—ã–∑–æ–≤–æ–≤
- ‚úÖ –£—Ç–æ—á–Ω—è—é—â–∏–µ –≤–æ–ø—Ä–æ—Å—ã (clarify_with_user_node)
- ‚úÖ Cleanup –ø–∞–ø–∫–∏ —Å–µ—Å—Å–∏–∏ –ø–æ—Å–ª–µ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è

### 3. –°—É–º–º–∞—Ä–∏–∑–∞—Ü–∏—è –∫–æ–Ω—Ç–µ–Ω—Ç–∞ ‚úÖ
**–§–∞–π–ª—ã**: `backend/src/workflow/search/actions.py`, `writer.py`, `nodes.py`, `chat/service.py`

- ‚úÖ LLM —Å—É–º–º–∞—Ä–∏–∑–∞—Ü–∏—è –≤–µ–∑–¥–µ (—á–µ—Ä–µ–∑ `summarize_text_llm()`)
- ‚úÖ Fallback: —É–º–Ω–æ–µ –æ–±—Ä–µ–∑–∞–Ω–∏–µ `summarize_text()` –ø–æ –≥—Ä–∞–Ω–∏—Ü–∞–º –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–π
- ‚úÖ –ù–∏–∫–æ–≥–¥–∞: –∂–µ—Å—Ç–∫–æ–µ –æ–±—Ä–µ–∑–∞–Ω–∏–µ `text[:N]` –¥–ª—è –∫–æ–Ω—Ç–µ–Ω—Ç–∞
- ‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω—ã –≤—Å–µ –º–µ—Å—Ç–∞ —Å –æ–±—Ä–µ–∑–∞–Ω–∏–µ–º

### 4. –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –≤—Å–µ—Ö –∏—Å—Ç–æ—á–Ω–∏–∫–æ–≤ ‚úÖ
**–§–∞–π–ª—ã**: `backend/src/workflow/search/writer.py`, `chat/service.py`, `config/settings.py`

- ‚úÖ –£–±—Ä–∞–Ω–æ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ `unique_sources[:10]`
- ‚úÖ –£–≤–µ–ª–∏—á–µ–Ω—ã —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è –∫ –¥–ª–∏–Ω–µ –æ—Ç–≤–µ—Ç–æ–≤:
  - Speed: 400-600 —Å–ª–æ–≤ (–±—ã–ª–æ 200-400)
  - Balanced: 800-1200 —Å–ª–æ–≤ (–±—ã–ª–æ 500-800)
  - Quality: 1500-3000 —Å–ª–æ–≤ (–±—ã–ª–æ 1000-2000)
- ‚úÖ –£–ª—É—á—à–µ–Ω—ã –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ LLM: "USE ALL sources"
- ‚úÖ `chat_model_max_tokens`: 2048 ‚Üí 8192
- ‚úÖ `sources_limit`: 8 ‚Üí 20

### 5. –ü–∞—Ä–∞–ª–ª–µ–ª–∏–∑–∞—Ü–∏—è –ø–∞–π–ø–ª–∞–π–Ω–æ–≤ ‚úÖ
**–§–∞–π–ª—ã**: `backend/src/workflow/search/actions.py`, `researcher.py`, `research/nodes.py`, `research/researcher.py`

#### web_search_handler
- ‚úÖ Queries –≤—ã–ø–æ–ª–Ω—è—é—Ç—Å—è –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ —á–µ—Ä–µ–∑ `asyncio.gather()`

#### scrape_url_handler
- ‚úÖ URLs —Å–∫—Ä–∞–ø—è—Ç—Å—è –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ
- ‚úÖ –°—É–º–º–∞—Ä–∏–∑–∞—Ü–∏—è –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ

#### researcher.py (search/researcher.py)
- ‚úÖ Tool calls –≤—ã–ø–æ–ª–Ω—è—é—Ç—Å—è –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ —á–µ—Ä–µ–∑ `asyncio.gather()`

#### researcher.py (research/researcher.py)
- ‚úÖ –ù–µ–∑–∞–≤–∏—Å–∏–º—ã–µ tool calls (web_search, scrape_url) –≤—ã–ø–æ–ª–Ω—è—é—Ç—Å—è –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ
- ‚úÖ –°–º–µ—à–∞–Ω–Ω—ã–µ types - –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ (–ø—Ä–∞–≤–∏–ª—å–Ω–æ –¥–ª—è ReAct)

#### execute_agents
- ‚úÖ –í—Å–µ –∞–≥–µ–Ω—Ç—ã –∂–¥—É—Ç—Å—è –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ —á–µ—Ä–µ–∑ `asyncio.gather()`
- ‚úÖ –ë—ã–ª–æ: –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ–µ –æ–∂–∏–¥–∞–Ω–∏–µ –∫–∞–∂–¥–æ–≥–æ –∞–≥–µ–Ω—Ç–∞
- ‚úÖ –°—Ç–∞–ª–æ: –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ–µ –æ–∂–∏–¥–∞–Ω–∏–µ –≤—Å–µ—Ö –∞–≥–µ–Ω—Ç–æ–≤

### 6. –ö–ª–∏–∫–∞–±–µ–ª—å–Ω—ã–µ —Å—Å—ã–ª–∫–∏ ‚úÖ
**–§–∞–π–ª—ã**: `backend/src/workflow/search/writer.py`, `frontend/src/app/page.tsx`

- ‚úÖ Backend: markdown —Ñ–æ—Ä–º–∞—Ç `[title](url)`
- ‚úÖ Frontend: —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥ —Å `target="_blank"`
- ‚úÖ –¶–∏—Ç–∞—Ü–∏–∏ [1], [2] –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∫–æ–Ω–≤–µ—Ä—Ç–∏—Ä—É—é—Ç—Å—è –≤ —Å—Å—ã–ª–∫–∏

### 7. PDF –≥–µ–Ω–µ—Ä–∞—Ü–∏—è ‚úÖ
**–§–∞–π–ª—ã**: `backend/src/utils/pdf_generator.py`, `api/routes/chat_stream.py`, `frontend/src/lib/api.ts`

- ‚úÖ API endpoint: `GET /api/chat/stream/{session_id}/pdf`
- ‚úÖ –§—É–Ω–∫—Ü–∏—è: `markdown_to_pdf()` —Å –∫–ª–∏–∫–∞–±–µ–ª—å–Ω—ã–º–∏ —Å—Å—ã–ª–∫–∞–º–∏
- ‚úÖ –ö–Ω–æ–ø–∫–∞ –Ω–∞ —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–µ –ø–æ—Å–ª–µ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è
- ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Å–∫–∞—á–∏–≤–∞–Ω–∏–µ

### 8. –î–∏–Ω–∞–º–∏—á–µ—Å–∫–∏–π –ø—Ä–æ–≥—Ä–µ—Å—Å ‚úÖ
**–§–∞–π–ª—ã**: `backend/src/streaming/sse.py`, `frontend/src/components/ChatProgressPanel.tsx`

- ‚úÖ 14 —Ç–∏–ø–æ–≤ streaming —Å–æ–±—ã—Ç–∏–π
- ‚úÖ –°–æ–±—ã—Ç–∏—è –æ—Ç–ø—Ä–∞–≤–ª—è—é—Ç—Å—è —Å—Ä–∞–∑—É –ø—Ä–∏ –≤–æ–∑–Ω–∏–∫–Ω–æ–≤–µ–Ω–∏–∏
- ‚úÖ Chunks —Å sleep(0.02) –¥–ª—è –ø–ª–∞–≤–Ω–æ—Å—Ç–∏
- ‚úÖ –§—Ä–æ–Ω—Ç–µ–Ω–¥ –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏
- ‚úÖ –ù–µ—Ç –¥–æ–ª–≥–æ–≥–æ –æ–∂–∏–¥–∞–Ω–∏—è

## üìä –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å

### –£—Å–∫–æ—Ä–µ–Ω–∏–µ –æ—Ç –ø–∞—Ä–∞–ª–ª–µ–ª–∏–∑–∞—Ü–∏–∏:

| –û–ø–µ—Ä–∞—Ü–∏—è | –î–æ | –ü–æ—Å–ª–µ | –£—Å–∫–æ—Ä–µ–Ω–∏–µ |
|----------|-----|-------|-----------|
| 3 search queries | 6s | 2s | 3x |
| 3 URL scrapes | 9s | 3s | 3x |
| 3 summarizations | 6s | 2s | 3x |
| 4 agents waiting | 42s | 12s | 3.5x |
| Tool calls (2-3) | 8s | 3s | 2.7x |

### –û–±—â–µ–µ —É—Å–∫–æ—Ä–µ–Ω–∏–µ:
- **Web Search**: ~2.5x –±—ã—Å—Ç—Ä–µ–µ
- **Deep Search**: ~3x –±—ã—Å—Ç—Ä–µ–µ
- **Deep Research**: ~3.5x –±—ã—Å—Ç—Ä–µ–µ

## ‚úÖ –§–∏–Ω–∞–ª—å–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞

| –¢—Ä–µ–±–æ–≤–∞–Ω–∏–µ | –°—Ç–∞—Ç—É—Å | –î–µ—Ç–∞–ª–∏ |
|-----------|--------|--------|
| –ü–∞—Ä–∞–ª–ª–µ–ª—å–Ω—ã–µ search queries | ‚úÖ | asyncio.gather() |
| –ü–∞—Ä–∞–ª–ª–µ–ª—å–Ω—ã–π scraping | ‚úÖ | asyncio.gather() |
| –ü–∞—Ä–∞–ª–ª–µ–ª—å–Ω–∞—è —Å—É–º–º–∞—Ä–∏–∑–∞—Ü–∏—è | ‚úÖ | asyncio.gather() |
| –ü–∞—Ä–∞–ª–ª–µ–ª—å–Ω—ã–µ tool calls | ‚úÖ | –ì–¥–µ –≤–æ–∑–º–æ–∂–Ω–æ |
| –ü–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ–µ –æ–∂–∏–¥–∞–Ω–∏–µ –∞–≥–µ–Ω—Ç–æ–≤ | ‚úÖ | asyncio.gather() |
| Streaming –±–µ–∑ –∑–∞–¥–µ—Ä–∂–µ–∫ | ‚úÖ | –°–æ–±—ã—Ç–∏—è —Å—Ä–∞–∑—É |
| –ù–µ—Ç –¥–æ–ª–≥–æ–≥–æ –æ–∂–∏–¥–∞–Ω–∏—è | ‚úÖ | –í—Å–µ –æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–æ |

## üìÅ –ò–∑–º–µ–Ω–µ–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã

### –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –ø–∞—Ä–∞–ª–ª–µ–ª–∏–∑–∞—Ü–∏–∏:
1. `backend/src/workflow/search/actions.py` - –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω—ã–µ queries –∏ scraping
2. `backend/src/workflow/search/researcher.py` - –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω—ã–µ tool calls
3. `backend/src/workflow/research/nodes.py` - –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ–µ –æ–∂–∏–¥–∞–Ω–∏–µ –∞–≥–µ–Ω—Ç–æ–≤
4. `backend/src/workflow/research/researcher.py` - –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω—ã–µ tool calls –≥–¥–µ –≤–æ–∑–º–æ–∂–Ω–æ

### –£–ª—É—á—à–µ–Ω–∏–µ –æ—Ç–≤–µ—Ç–æ–≤:
5. `backend/src/workflow/search/writer.py` - —É–±—Ä–∞–Ω–æ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ –∏—Å—Ç–æ—á–Ω–∏–∫–æ–≤, —É–≤–µ–ª–∏—á–µ–Ω–∞ –¥–ª–∏–Ω–∞
6. `backend/src/chat/service.py` - —É–ª—É—á—à–µ–Ω—ã –ø—Ä–æ–º–ø—Ç—ã
7. `backend/src/config/settings.py` - —É–≤–µ–ª–∏—á–µ–Ω—ã –ª–∏–º–∏—Ç—ã

### –°—É–º–º–∞—Ä–∏–∑–∞—Ü–∏—è:
8. `backend/src/workflow/search/actions.py` - —Å—É–º–º–∞—Ä–∏–∑–∞—Ü–∏—è –≤–º–µ—Å—Ç–æ –æ–±—Ä–µ–∑–∞–Ω–∏—è
9. `backend/src/workflow/research/nodes.py` - —É–º–Ω–æ–µ –æ–±—Ä–µ–∑–∞–Ω–∏–µ –≤ –ø—Ä–æ–º–ø—Ç–∞—Ö

## üöÄ –î–ª—è –ø—Ä–∏–º–µ–Ω–µ–Ω–∏—è

```bash
cd /root/asudakov/projects/all_included_deep_research
docker-compose down
docker-compose build backend
docker-compose up -d
```

## ‚úÖ –í—Å–µ –≥–æ—Ç–æ–≤–æ!

**–°–∏—Å—Ç–µ–º–∞ –ø–æ–ª–Ω–æ—Å—Ç—å—é –æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–∞ –∏ –≥–æ—Ç–æ–≤–∞ –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é!** üéâ

- ‚úÖ –ú–∞–∫—Å–∏–º–∞–ª—å–Ω–∞—è –ø–∞—Ä–∞–ª–ª–µ–ª–∏–∑–∞—Ü–∏—è
- ‚úÖ –ù–µ—Ç –¥–æ–ª–≥–∏—Ö –æ–∂–∏–¥–∞–Ω–∏–π
- ‚úÖ –ü–æ–ª–Ω–æ—Ü–µ–Ω–Ω—ã–µ —Ä–∞–∑–≤–µ—Ä–Ω—É—Ç—ã–µ –æ—Ç–≤–µ—Ç—ã
- ‚úÖ –í—Å–µ –∏—Å—Ç–æ—á–Ω–∏–∫–∏ –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è
- ‚úÖ –ö–ª–∏–∫–∞–±–µ–ª—å–Ω—ã–µ —Å—Å—ã–ª–∫–∏
- ‚úÖ PDF —Å–∫–∞—á–∏–≤–∞–Ω–∏–µ
- ‚úÖ –î–∏–Ω–∞–º–∏—á–µ—Å–∫–∏–π –ø—Ä–æ–≥—Ä–µ—Å—Å
- ‚úÖ Streaming –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏

