# Frontend Chat Search Integration

## –û–±–∑–æ—Ä –∏–∑–º–µ–Ω–µ–Ω–∏–π

–ò–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞–Ω –≥–∏–±—Ä–∏–¥–Ω—ã–π –ø–æ–∏—Å–∫ –ø–æ —Å–æ–æ–±—â–µ–Ω–∏—è–º —á–∞—Ç–æ–≤ –Ω–∞ —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–µ —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º –Ω–æ–≤–æ–≥–æ API `/api/chats/search`.

## –ß—Ç–æ –±—ã–ª–æ —Å–¥–µ–ª–∞–Ω–æ

### 1. –û–±–Ω–æ–≤–ª—ë–Ω API –∫–ª–∏–µ–Ω—Ç

**–§–∞–π–ª:** [frontend/src/lib/api.ts](frontend/src/lib/api.ts)

#### –î–æ–±–∞–≤–ª–µ–Ω –Ω–æ–≤—ã–π —Ç–∏–ø `ChatMessageSearchResult`

```typescript
export type ChatMessageSearchResult = {
  message_id: number;
  chat_id: string;
  message_message_id: string;
  role: 'user' | 'assistant' | 'system';
  content: string;
  created_at: string;
  chat_title: string;
  chat_updated_at: string;
  score: number;           // –û—Ü–µ–Ω–∫–∞ —Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω–æ—Å—Ç–∏ (0.0 - 1.0)
  search_mode: string;     // 'hybrid', 'vector', 'fulltext'
};
```

#### –î–æ–±–∞–≤–ª–µ–Ω–∞ —Ñ—É–Ω–∫—Ü–∏—è `searchChatMessages()`

```typescript
export async function searchChatMessages(
  query: string,
  limit: number = 5
): Promise<ChatMessageSearchResult[]>
```

**–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏:**
- –ò—Å–ø–æ–ª—å–∑—É–µ—Ç –≥–∏–±—Ä–∏–¥–Ω—ã–π –ø–æ–∏—Å–∫ (–≤–µ–∫—Ç–æ—Ä–Ω—ã–π + –ø–æ–ª–Ω–æ—Ç–µ–∫—Å—Ç–æ–≤—ã–π)
- –ü–æ —É–º–æ–ª—á–∞–Ω–∏—é –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Ç–æ–ø-5 –Ω–∞–∏–±–æ–ª–µ–µ —Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω—ã—Ö —Å–æ–æ–±—â–µ–Ω–∏–π
- –ö–∞–∂–¥–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ –≤–∫–ª—é—á–∞–µ—Ç –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ —á–∞—Ç–µ

#### –û–±–Ω–æ–≤–ª–µ–Ω–∞ —Ñ—É–Ω–∫—Ü–∏—è `searchChats()` (–¥–ª—è –æ–±—Ä–∞—Ç–Ω–æ–π —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç–∏)

```typescript
export async function searchChats(
  query: string,
  limit: number = 10
): Promise<Chat[]>
```

**–ò–∑–º–µ–Ω–µ–Ω–∏—è:**
- –¢–µ–ø–µ—Ä—å –∏—Å–ø–æ–ª—å–∑—É–µ—Ç `searchChatMessages()` –≤–Ω—É—Ç—Ä–∏
- –ì—Ä—É–ø–ø–∏—Ä—É–µ—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã –ø–æ `chat_id`
- –ü–æ–º–µ—á–µ–Ω–∞ –∫–∞–∫ `@deprecated` - —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `searchChatMessages()`

---

### 2. –û–±–Ω–æ–≤–ª—ë–Ω –∫–æ–º–ø–æ–Ω–µ–Ω—Ç ChatSearch

**–§–∞–π–ª:** [frontend/src/components/ChatSearch.tsx](frontend/src/components/ChatSearch.tsx)

#### –ò–∑–º–µ–Ω–µ–Ω–∏—è –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞

```typescript
interface ChatSearchProps {
  onChatSelect: (chatId: string, messageId?: string) => void;  // –î–æ–±–∞–≤–ª–µ–Ω messageId
  onClose: () => void;
}
```

#### –ù–æ–≤—ã–π UI

**–ü–æ–ª–µ –ø–æ–∏—Å–∫–∞:**
- Placeholder: "Search messages using AI hybrid search (semantic + keywords)..."
- Debounce 300ms –¥–ª—è –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ –∑–∞–ø—Ä–æ—Å–æ–≤

**–ö–∞—Ä—Ç–æ—á–∫–∞ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞ —Å–æ–¥–µ—Ä–∂–∏—Ç:**
1. **–ó–∞–≥–æ–ª–æ–≤–æ–∫:**
   - –ò–∫–æ–Ω–∫–∞ —Å–æ–æ–±—â–µ–Ω–∏—è (MessageSquare)
   - –ù–∞–∑–≤–∞–Ω–∏–µ —á–∞—Ç–∞
   - –ü–æ–∑–∏—Ü–∏—è –≤ —Ç–æ–ø–µ (#1, #2, etc.)
   - –û—Ü–µ–Ω–∫–∞ —Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω–æ—Å—Ç–∏ (–≤ –ø—Ä–æ—Ü–µ–Ω—Ç–∞—Ö)

2. **–°–æ–¥–µ—Ä–∂–∏–º–æ–µ:**
   - –¢–µ–∫—Å—Ç —Å–æ–æ–±—â–µ–Ω–∏—è (–æ–±—Ä–µ–∑–∞–Ω –¥–æ 200 —Å–∏–º–≤–æ–ª–æ–≤, 3 —Å—Ç—Ä–æ–∫–∏ max)

3. **–§—É—Ç–µ—Ä:**
   - –†–æ–ª—å (user/assistant/system) —Å —Ü–≤–µ—Ç–æ–≤–æ–π –∏–Ω–¥–∏–∫–∞—Ü–∏–µ–π
   - –î–∞—Ç–∞ (–æ—Ç–Ω–æ—Å–∏—Ç–µ–ª—å–Ω–∞—è: "Today", "Yesterday", "X days ago")
   - –†–µ–∂–∏–º –ø–æ–∏—Å–∫–∞ (hybrid/vector/fulltext)

**–¶–≤–µ—Ç–æ–≤–∞—è –∫–æ–¥–∏—Ä–æ–≤–∫–∞ —Ä–æ–ª–µ–π:**
- `user`: —Å–∏–Ω–∏–π —Ñ–æ–Ω (bg-blue-500/10)
- `assistant`: –∑–µ–ª—ë–Ω—ã–π —Ñ–æ–Ω (bg-green-500/10)
- `system`: —Å–µ—Ä—ã–π —Ñ–æ–Ω (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é)

**–ù–æ–≤—ã–µ –≤—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏:**

```typescript
const formatDate = (dateString: string) => {
  // –§–æ—Ä–º–∞—Ç–∏—Ä—É–µ—Ç –¥–∞—Ç—É –æ—Ç–Ω–æ—Å–∏—Ç–µ–ª—å–Ω–æ —Ç–µ–∫—É—â–µ–≥–æ –≤—Ä–µ–º–µ–Ω–∏
}

const truncateText = (text: string, maxLength: number = 200) => {
  // –û–±—Ä–µ–∑–∞–µ—Ç —Ç–µ–∫—Å—Ç —Å –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ–º "..."
}
```

---

### 3. –û–±–Ω–æ–≤–ª—ë–Ω –≥–ª–∞–≤–Ω—ã–π –∫–æ–º–ø–æ–Ω–µ–Ω—Ç (HomePage)

**–§–∞–π–ª:** [frontend/src/app/page.tsx](frontend/src/app/page.tsx)

#### –û–±–Ω–æ–≤–ª–µ–Ω–∞ —Ñ—É–Ω–∫—Ü–∏—è `handleChatSelect`

**–°–∏–≥–Ω–∞—Ç—É—Ä–∞:**
```typescript
const handleChatSelect = async (chatId: string, messageId?: string) => {
  // ...
}
```

**–ù–æ–≤–∞—è –ª–æ–≥–∏–∫–∞:**
1. –ó–∞–≥—Ä—É–∂–∞–µ—Ç —á–∞—Ç –ø–æ `chatId`
2. –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç —Å–æ–æ–±—â–µ–Ω–∏—è
3. **–ï—Å–ª–∏ –ø–µ—Ä–µ–¥–∞–Ω `messageId`:**
   - –ò—â–µ—Ç —ç–ª–µ–º–µ–Ω—Ç —Å –∞—Ç—Ä–∏–±—É—Ç–æ–º `data-message-id="${messageId}"`
   - –ü–ª–∞–≤–Ω–æ –ø—Ä–æ–∫—Ä—É—á–∏–≤–∞–µ—Ç –∫ –Ω–µ–º—É (`scrollIntoView`)
   - –î–æ–±–∞–≤–ª—è–µ—Ç –∫–æ–ª—å—Ü–æ –ø–æ–¥—Å–≤–µ—Ç–∫–∏ –Ω–∞ 2 —Å–µ–∫—É–Ω–¥—ã (`ring-2 ring-primary`)

**–ö–æ–¥ –ø–æ–¥—Å–≤–µ—Ç–∫–∏:**
```typescript
if (messageId) {
  setTimeout(() => {
    const messageElement = document.querySelector(`[data-message-id="${messageId}"]`);
    if (messageElement) {
      messageElement.scrollIntoView({ behavior: 'smooth', block: 'center' });
      // Highlight the message briefly
      messageElement.classList.add('ring-2', 'ring-primary', 'ring-offset-2');
      setTimeout(() => {
        messageElement.classList.remove('ring-2', 'ring-primary', 'ring-offset-2');
      }, 2000);
    }
  }, 100);
}
```

#### –î–æ–±–∞–≤–ª–µ–Ω –∞—Ç—Ä–∏–±—É—Ç `data-message-id` –∫ —ç–ª–µ–º–µ–Ω—Ç–∞–º —Å–æ–æ–±—â–µ–Ω–∏–π

**–ò–∑–º–µ–Ω–µ–Ω–∏—è –≤ —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥–µ:**
```tsx
<div
  key={message.id}
  data-message-id={message.id}  // –ù–û–í–û–ï
  className={cn(
    'max-w-[85%] rounded-2xl px-4 py-3 text-sm shadow-sm animate-fade-rise transition-all',  // –î–æ–±–∞–≤–ª–µ–Ω transition-all
    // ...
  )}
>
```

---

## –ö–∞–∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å

### 1. –û—Ç–∫—Ä—ã—Ç—å –ø–æ–∏—Å–∫

–ö–ª–∏–∫–Ω—É—Ç—å –Ω–∞ –∏–∫–æ–Ω–∫—É –ø–æ–∏—Å–∫–∞ (üîç) –≤ –ø—Ä–∞–≤–æ–º –≤–µ—Ä—Ö–Ω–µ–º —É–≥–ª—É —Ö–µ–¥–µ—Ä–∞.

### 2. –í–≤–µ—Å—Ç–∏ –∑–∞–ø—Ä–æ—Å

–í –ø–æ–ª–µ –ø–æ–∏—Å–∫–∞ –≤–≤–µ—Å—Ç–∏ —Ç–µ–∫—Å—Ç:
- –ú–æ–∂–Ω–æ –∏—Å–∫–∞—Ç—å —Å–µ–º–∞–Ω—Ç–∏—á–µ—Å–∫–∏ (–ø–æ —Å–º—ã—Å–ª—É)
- –ú–æ–∂–Ω–æ –∏—Å–∫–∞—Ç—å –ø–æ –∫–ª—é—á–µ–≤—ã–º —Å–ª–æ–≤–∞–º
- –ü–æ–∏—Å–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç –Ω–∞ —Ä—É—Å—Å–∫–æ–º –∏ –∞–Ω–≥–ª–∏–π—Å–∫–æ–º —è–∑—ã–∫–∞—Ö

### 3. –í—ã–±—Ä–∞—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç

–ö–ª–∏–∫–Ω—É—Ç—å –Ω–∞ –ª—é–±—É—é –∫–∞—Ä—Ç–æ—á–∫—É —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞:
- –û—Ç–∫—Ä–æ–µ—Ç—Å—è —á–∞—Ç
- –ü—Ä–æ–∏–∑–æ–π–¥—ë—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –ø—Ä–æ–∫—Ä—É—Ç–∫–∞ –∫ –Ω–∞–π–¥–µ–Ω–Ω–æ–º—É —Å–æ–æ–±—â–µ–Ω–∏—é
- –°–æ–æ–±—â–µ–Ω–∏–µ –±—É–¥–µ—Ç –ø–æ–¥—Å–≤–µ—á–µ–Ω–æ –∫–æ–ª—å—Ü–æ–º –Ω–∞ 2 —Å–µ–∫—É–Ω–¥—ã

---

## –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –¥–µ—Ç–∞–ª–∏

### –ü–æ–∏—Å–∫–æ–≤—ã–µ —Ä–µ–∂–∏–º—ã

**Hybrid (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é):**
- –ö–æ–º–±–∏–Ω–∏—Ä—É–µ—Ç –≤–µ–∫—Ç–æ—Ä–Ω—ã–π –∏ –ø–æ–ª–Ω–æ—Ç–µ–∫—Å—Ç–æ–≤—ã–π –ø–æ–∏—Å–∫
- –ò—Å–ø–æ–ª—å–∑—É–µ—Ç RRF (Reciprocal Rank Fusion) –¥–ª—è —Ä–∞–Ω–∂–∏—Ä–æ–≤–∞–Ω–∏—è
- –õ—É—á—à–∏–π –±–∞–ª–∞–Ω—Å –º–µ–∂–¥—É —Ç–æ—á–Ω–æ—Å—Ç—å—é –∏ –ø–æ–ª–Ω–æ—Ç–æ–π

**Vector:**
- –°–µ–º–∞–Ω—Ç–∏—á–µ—Å–∫–∏–π –ø–æ–∏—Å–∫ –ø–æ —ç–º–±–µ–¥–¥–∏–Ω–≥–∞–º
- –ù–∞—Ö–æ–¥–∏—Ç –ø–æ—Ö–æ–∂–∏–µ –ø–æ —Å–º—ã—Å–ª—É —Å–æ–æ–±—â–µ–Ω–∏—è

**Fulltext:**
- –ü–æ–∏—Å–∫ –ø–æ –∫–ª—é—á–µ–≤—ã–º —Å–ª–æ–≤–∞–º
- PostgreSQL Full-Text Search

### –û—Ü–µ–Ω–∫–∞ —Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω–æ—Å—Ç–∏ (Score)

- –ó–Ω–∞—á–µ–Ω–∏–µ –æ—Ç 0.0 –¥–æ 1.0
- –û—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è –≤ –ø—Ä–æ—Ü–µ–Ω—Ç–∞—Ö (0% - 100%)
- –í—ã—á–∏—Å–ª—è–µ—Ç—Å—è —Å –ø–æ–º–æ—â—å—é RRF –∞–ª–≥–æ—Ä–∏—Ç–º–∞
- –°–æ–æ–±—â–µ–Ω–∏—è —Å –≤—ã—Å–æ–∫–∏–º score –±–æ–ª–µ–µ —Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω—ã –∑–∞–ø—Ä–æ—Å—É

### –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å

**Debounce:**
- –ü–æ–∏—Å–∫ –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è —á–µ—Ä–µ–∑ 300ms –ø–æ—Å–ª–µ –ø–æ—Å–ª–µ–¥–Ω–µ–≥–æ –≤–≤–æ–¥–∞
- –ü—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–∞–µ—Ç –∏–∑–±—ã—Ç–æ—á–Ω—ã–µ –∑–∞–ø—Ä–æ—Å—ã –∫ API

**–ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ:**
- API –æ—Ç–≤–µ—Ç—ã –Ω–µ –∫—ç—à–∏—Ä—É—é—Ç—Å—è (–≤—Å–µ–≥–¥–∞ –∞–∫—Ç—É–∞–ª—å–Ω—ã–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã)
- –ú–æ–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ –Ω–∞ —É—Ä–æ–≤–Ω–µ –±—Ä–∞—É–∑–µ—Ä–∞ –ø—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏

---

## –ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

### –ü—Ä–∏–º–µ—Ä 1: –ü–æ–∏—Å–∫ –ø–æ –∫–ª—é—á–µ–≤–æ–º—É —Å–ª–æ–≤—É

**–ó–∞–ø—Ä–æ—Å:** `authentication`

**–†–µ–∑—É–ª—å—Ç–∞—Ç:**
```
#1 - 95%
Chat: "Login System Implementation"
User: "How do we implement authentication with JWT tokens?"
Yesterday - hybrid
```

### –ü—Ä–∏–º–µ—Ä 2: –°–µ–º–∞–Ω—Ç–∏—á–µ—Å–∫–∏–π –ø–æ–∏—Å–∫

**–ó–∞–ø—Ä–æ—Å:** `–∫–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è`

**–†–µ–∑—É–ª—å—Ç–∞—Ç:**
```
#1 - 92%
Chat: "Backend Development"
Assistant: "–ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è –ø—Ä–æ–≤–µ—Ä—è–µ—Ç –ø—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è..."
2 days ago - hybrid
```

### –ü—Ä–∏–º–µ—Ä 3: –ü–æ–∏—Å–∫ —Å–ª–æ–∂–Ω—ã—Ö —Ñ—Ä–∞–∑

**–ó–∞–ø—Ä–æ—Å:** `–Ω–∞—Å—Ç—Ä–æ–π–∫–∞ docker compose –¥–ª—è production`

**–†–µ–∑—É–ª—å—Ç–∞—Ç:**
```
#1 - 88%
Chat: "DevOps Setup"
User: "–ù—É–∂–Ω–æ –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å docker-compose –¥–ª—è –ø—Ä–æ–¥ –æ–∫—Ä—É–∂–µ–Ω–∏—è..."
Dec 30 - hybrid
```

---

## –í–∏–∑—É–∞–ª—å–Ω—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã

### –ö–∞—Ä—Ç–æ—á–∫–∞ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ üí¨ Chat Title                        #1    95% ‚îÇ
‚îÇ                                                 ‚îÇ
‚îÇ Message content preview truncated to 200       ‚îÇ
‚îÇ characters maximum displayed in 3 lines...     ‚îÇ
‚îÇ                                                 ‚îÇ
‚îÇ [user] üïê Yesterday  hybrid                     ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

### –ü–æ–¥—Å–≤–µ—Ç–∫–∞ –Ω–∞–π–¥–µ–Ω–Ω–æ–≥–æ —Å–æ–æ–±—â–µ–Ω–∏—è

–ü—Ä–∏ –∫–ª–∏–∫–µ –Ω–∞ —Ä–µ–∑—É–ª—å—Ç–∞—Ç:
```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ ‚ïî‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïó   ‚îÇ
‚îÇ ‚ïë  [Highlighted Message]                    ‚ïë   ‚îÇ
‚îÇ ‚ïë  This message is highlighted with         ‚ïë   ‚îÇ
‚îÇ ‚ïë  a primary ring for 2 seconds             ‚ïë   ‚îÇ
‚îÇ ‚ïö‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïù   ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

---

## –£–ª—É—á—à–µ–Ω–∏—è –∏ –≤–æ–∑–º–æ–∂–Ω—ã–µ –¥–æ—Ä–∞–±–æ—Ç–∫–∏

### –ë–ª–∏–∂–∞–π—à–∏–µ —É–ª—É—á—à–µ–Ω–∏—è

1. **–§–∏–ª—å—Ç—Ä—ã:**
   - –ü–æ –¥–∞—Ç–µ —Å–æ–∑–¥–∞–Ω–∏—è
   - –ü–æ —Ä–æ–ª–∏ (user/assistant/system)
   - –ü–æ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–º—É —á–∞—Ç—É

2. **–í—ã–¥–µ–ª–µ–Ω–∏–µ —Å–æ–≤–ø–∞–¥–µ–Ω–∏–π:**
   - –ü–æ–¥—Å–≤–µ—Ç–∫–∞ –Ω–∞–π–¥–µ–Ω–Ω—ã—Ö —Å–ª–æ–≤ –≤ —Ç–µ–∫—Å—Ç–µ
   - –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ `ts_headline` –Ω–∞ –±—ç–∫–µ–Ω–¥–µ

3. **–ò—Å—Ç–æ—Ä–∏—è –ø–æ–∏—Å–∫–∞:**
   - –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –ø–æ—Å–ª–µ–¥–Ω–∏—Ö –∑–∞–ø—Ä–æ—Å–æ–≤
   - –ë—ã—Å—Ç—Ä—ã–π –¥–æ—Å—Ç—É–ø –∫ —á–∞—Å—Ç—ã–º –ø–æ–∏—Å–∫–∞–º

4. **–ì–æ—Ä—è—á–∏–µ –∫–ª–∞–≤–∏—à–∏:**
   - `Cmd/Ctrl + K` –¥–ª—è –æ—Ç–∫—Ä—ã—Ç–∏—è –ø–æ–∏—Å–∫–∞
   - `Enter` –¥–ª—è –ø–µ—Ä–µ—Ö–æ–¥–∞ –∫ –ø–µ—Ä–≤–æ–º—É —Ä–µ–∑—É–ª—å—Ç–∞—Ç—É
   - `Esc` –¥–ª—è –∑–∞–∫—Ä—ã—Ç–∏—è

### –î–æ–ª–≥–æ—Å—Ä–æ—á–Ω—ã–µ —É–ª—É—á—à–µ–Ω–∏—è

1. **–†–∞—Å—à–∏—Ä–µ–Ω–Ω—ã–π –ø–æ–∏—Å–∫:**
   - –ü–æ–∏—Å–∫ –ø–æ –¥–∞—Ç–∞–º (`after:2024-01-01`)
   - –ü–æ–∏—Å–∫ –ø–æ –∞–≤—Ç–æ—Ä—É (`from:user`)
   - –ò—Å–∫–ª—é—á–µ–Ω–∏–µ —Å–ª–æ–≤ (`-keyword`)

2. **–≠–∫—Å–ø–æ—Ä—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤:**
   - –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –Ω–∞–π–¥–µ–Ω–Ω—ã—Ö —Å–æ–æ–±—â–µ–Ω–∏–π
   - –°–æ–∑–¥–∞–Ω–∏–µ PDF –æ—Ç—á—ë—Ç–∞

3. **–ê–Ω–∞–ª–∏—Ç–∏–∫–∞ –ø–æ–∏—Å–∫–∞:**
   - –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø–æ –∑–∞–ø—Ä–æ—Å–∞–º
   - –ü–æ–ø—É–ª—è—Ä–Ω—ã–µ —Ç–µ–º—ã
   - Trending topics

---

## –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏

### Frontend –ø–∞–∫–µ—Ç—ã
- `lucide-react` - –∏–∫–æ–Ω–∫–∏ (Search, X, MessageSquare, Clock)
- `@radix-ui` - UI –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã (Button, Input, Card)
- `tailwindcss` - —Å—Ç–∏–ª–∏
- `class-variance-authority` - —É—Ç–∏–ª–∏—Ç–∞ –¥–ª—è –∫–ª–∞—Å—Å–æ–≤

### Backend API
- `GET /api/chats/search?q={query}&limit={limit}`
- –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç: `{ messages: ChatMessageSearchResult[], count: number }`

---

## –û—Ç–ª–∞–¥–∫–∞

### Debug —Ä–µ–∂–∏–º

–í–∫–ª—é—á–∏—Ç—å –≤ `.env.local`:
```bash
NEXT_PUBLIC_DEBUG_MODE=true
```

–í –∫–æ–Ω—Å–æ–ª–∏ –±—Ä–∞—É–∑–µ—Ä–∞ –±—É–¥—É—Ç –ª–æ–≥–∏:
```javascript
[debug] chat selected { chatId: "abc-123", messages: 15, targetMessageId: "msg-456" }
```

### –ü—Ä–æ–≤–µ—Ä–∫–∞ –∑–∞–ø—Ä–æ—Å–æ–≤

**–û—Ç–∫—Ä—ã—Ç—å DevTools ‚Üí Network:**
1. –í–≤–µ—Å—Ç–∏ –∑–∞–ø—Ä–æ—Å –≤ –ø–æ–ª–µ –ø–æ–∏—Å–∫–∞
2. –ù–∞–π—Ç–∏ –∑–∞–ø—Ä–æ—Å `GET /api/chats/search?q=...`
3. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å Response:
   ```json
   {
     "messages": [...],
     "count": 5
   }
   ```

### –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø—Ä–æ–∫—Ä—É—Ç–∫–∏

**–í –∫–æ–Ω—Å–æ–ª–∏:**
```javascript
// –ù–∞–π—Ç–∏ —ç–ª–µ–º–µ–Ω—Ç
document.querySelector('[data-message-id="your-message-id"]')

// –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –Ω–∞–ª–∏—á–∏–µ –∫–ª–∞—Å—Å–æ–≤ –ø–æ–¥—Å–≤–µ—Ç–∫–∏
element.classList.contains('ring-2')  // true –Ω–∞ 2 —Å–µ–∫—É–Ω–¥—ã
```

---

## –°–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å

- ‚úÖ Chrome 90+
- ‚úÖ Firefox 88+
- ‚úÖ Safari 14+
- ‚úÖ Edge 90+

**–¢—Ä–µ–±–æ–≤–∞–Ω–∏—è:**
- JavaScript –≤–∫–ª—é—á–µ–Ω
- –ü–æ–¥–¥–µ—Ä–∂–∫–∞ CSS Grid
- –ü–æ–¥–¥–µ—Ä–∂–∫–∞ Fetch API
- –ü–æ–¥–¥–µ—Ä–∂–∫–∞ async/await

---

## –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

### –†—É—á–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

1. **–°–æ–∑–¥–∞—Ç—å –Ω–µ—Å–∫–æ–ª—å–∫–æ —á–∞—Ç–æ–≤** —Å —Ä–∞–∑–Ω—ã–º–∏ —Å–æ–æ–±—â–µ–Ω–∏—è–º–∏
2. **–û—Ç–∫—Ä—ã—Ç—å –ø–æ–∏—Å–∫** (–∏–∫–æ–Ω–∫–∞ üîç)
3. **–í–≤–µ—Å—Ç–∏ –∑–∞–ø—Ä–æ—Å** –∏ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã
4. **–ö–ª–∏–∫–Ω—É—Ç—å –Ω–∞ —Ä–µ–∑—É–ª—å—Ç–∞—Ç** –∏ —É–±–µ–¥–∏—Ç—å—Å—è:
   - –ß–∞—Ç –æ—Ç–∫—Ä—ã–ª—Å—è
   - –ü—Ä–æ–∫—Ä—É—Ç–∫–∞ –∫ —Å–æ–æ–±—â–µ–Ω–∏—é —Ä–∞–±–æ—Ç–∞–µ—Ç
   - –ü–æ–¥—Å–≤–µ—Ç–∫–∞ –ø–æ—è–≤–ª—è–µ—Ç—Å—è –∏ –∏—Å—á–µ–∑–∞–µ—Ç

### –ê–≤—Ç–æ–º–∞—Ç–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ (TODO)

```typescript
// frontend/src/components/ChatSearch.test.tsx
import { render, screen, fireEvent, waitFor } from '@testing-library/react';
import { ChatSearch } from './ChatSearch';

test('searches messages and displays results', async () => {
  const onChatSelect = jest.fn();
  const onClose = jest.fn();

  render(<ChatSearch onChatSelect={onChatSelect} onClose={onClose} />);

  const input = screen.getByPlaceholderText(/search messages/i);
  fireEvent.change(input, { target: { value: 'test query' } });

  await waitFor(() => {
    expect(screen.getByText(/Chat Title/i)).toBeInTheDocument();
  });

  fireEvent.click(screen.getByText(/Chat Title/i));

  expect(onChatSelect).toHaveBeenCalledWith('chat-id', 'message-id');
  expect(onClose).toHaveBeenCalled();
});
```

---

## Changelog

### v2.0.0 (2026-01-02)

**Breaking Changes:**
- `onChatSelect` —Ç–µ–ø–µ—Ä—å –ø—Ä–∏–Ω–∏–º–∞–µ—Ç –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–π `messageId`
- `searchChats()` –ø–æ–º–µ—á–µ–Ω–∞ –∫–∞–∫ deprecated

**New Features:**
- ‚ú® –ì–∏–±—Ä–∏–¥–Ω—ã–π –ø–æ–∏—Å–∫ –ø–æ —Å–æ–æ–±—â–µ–Ω–∏—è–º
- ‚ú® –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –ø—Ä–æ–∫—Ä—É—Ç–∫–∞ –∫ –Ω–∞–π–¥–µ–Ω–Ω–æ–º—É —Å–æ–æ–±—â–µ–Ω–∏—é
- ‚ú® –ü–æ–¥—Å–≤–µ—Ç–∫–∞ –Ω–∞–π–¥–µ–Ω–Ω–æ–≥–æ —Å–æ–æ–±—â–µ–Ω–∏—è
- ‚ú® –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –æ—Ü–µ–Ω–∫–∏ —Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω–æ—Å—Ç–∏
- ‚ú® –¶–≤–µ—Ç–æ–≤–∞—è –∫–æ–¥–∏—Ä–æ–≤–∫–∞ —Ä–æ–ª–µ–π
- ‚ú® –û—Ç–Ω–æ—Å–∏—Ç–µ–ª—å–Ω—ã–µ –¥–∞—Ç—ã (Today, Yesterday, etc.)

**Improvements:**
- üé® –£–ª—É—á—à–µ–Ω–Ω—ã–π UI –∫–∞—Ä—Ç–æ—á–µ–∫ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤
- üöÄ Debounce –¥–ª—è –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ –∑–∞–ø—Ä–æ—Å–æ–≤
- üì± –ê–¥–∞–ø—Ç–∏–≤–Ω—ã–π –¥–∏–∑–∞–π–Ω
- ‚ôø Accessibility —É–ª—É—á—à–µ–Ω–∏—è

---

## –í–∫–ª–∞–¥

–î–ª—è –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –Ω–æ–≤—ã—Ö —Ñ—É–Ω–∫—Ü–∏–π:
1. –§–æ—Ä–∫–Ω–∏—Ç–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π
2. –°–æ–∑–¥–∞–π—Ç–µ feature branch
3. –î–æ–±–∞–≤—å—Ç–µ —Ç–µ—Å—Ç—ã
4. –û—Ç–ø—Ä–∞–≤—å—Ç–µ pull request

---

## –õ–∏—Ü–µ–Ω–∑–∏—è

MIT License - —Å–º. [LICENSE](../LICENSE)
